(function(){var a=(typeof window!="undefined")?window:exports;var c=a._;var b=a._={};b.VERSION="0.2.0";b.each=function(g,j,d){var k=0;try{if(g.forEach){g.forEach(j,d)}else{if(g.length){for(var h=0;h<g.length;h++){j.call(d,g[h],h)}}else{if(g.each){g.each(function(e){j.call(d,e,k++)})}else{var h=0;for(var n in g){var m=g[n],f=[n,m];f.key=n;f.value=m;j.call(d,f,h++)}}}}}catch(l){if(l!="__break__"){throw l}}return g};b.map=function(g,f,e){if(g&&g.map){return g.map(f,e)}var d=[];b.each(g,function(j,h){d.push(f.call(e,j,h))});return d};b.reduce=function(g,d,f,e){b.each(g,function(j,h){d=f.call(e,d,j,h)});return d};b.detect=function(g,f,e){var d;b.each(g,function(j,h){if(f.call(e,j,h)){d=j;throw"__break__"}});return d};b.select=function(g,f,e){if(g.filter){return g.filter(f,e)}var d=[];b.each(g,function(j,h){if(f.call(e,j,h)){d.push(j)}});return d};b.reject=function(g,f,e){var d=[];b.each(g,function(j,h){if(!f.call(e,j,h)){d.push(j)}});return d};b.all=function(g,f,e){f=f||function(h){return h};if(g.every){return g.every(f,e)}var d=true;b.each(g,function(j,h){d=d&&!!f.call(e,j,h);if(!d){throw"__break__"}});return d};b.any=function(g,f,e){f=f||function(h){return h};if(g.some){return g.some(f,e)}var d=false;b.each(g,function(j,h){if(d=!!f.call(e,j,h)){throw"__break__"}});return d};b.include=function(f,e){if(b.isArray(f)){return b.indexOf(f,e)!=-1}var d=false;b.each(f,function(g){if(g.value===e){d=true;throw"__break__"}});return d};b.invoke=function(e,f){var d=b.toArray(arguments).slice(2);return b.map(e,function(g){return(f?g[f]:g).apply(g,d)})};b.pluck=function(f,e){var d=[];b.each(f,function(g){d.push(g[e])});return d};b.max=function(g,f,e){if(!f&&b.isArray(g)){return Math.max.apply(Math,g)}var d;b.each(g,function(k,h){var j=f?f.call(e,k,h):k;if(d==null||j>=d.computed){d={value:k,computed:j}}});return d.value};b.min=function(g,f,e){if(!f&&b.isArray(g)){return Math.min.apply(Math,g)}var d;b.each(g,function(k,h){var j=f?f.call(e,k,h):k;if(d==null||j<d.computed){d={value:k,computed:j}}});return d.value};b.sortBy=function(f,e,d){return b.pluck(b.map(f,function(h,g){return{value:h,criteria:e.call(d,h,g)}}).sort(function(k,j){var h=k.criteria,g=j.criteria;return h<g?-1:h>g?1:0}),"value")};b.sortedIndex=function(j,h,f){f=f||function(k){return k};var d=0,g=j.length;while(d<g){var e=(d+g)>>1;f(j[e])<f(h)?d=e+1:g=e}return d};b.toArray=function(d){if(!d){return[]}if(b.isArray(d)){return d}return b.map(d,function(e){return e})};b.size=function(d){return b.toArray(d).length};b.first=function(d){return d[0]};b.last=function(d){return d[d.length-1]};b.compact=function(d){return b.select(d,function(e){return !!e})};b.flatten=function(d){return b.reduce(d,[],function(e,f){if(b.isArray(f)){return e.concat(b.flatten(f))}e.push(f);return e})};b.without=function(e){var d=e.slice.call(arguments,0);return b.select(e,function(f){return !b.include(d,f)})};b.uniq=function(e,d){return b.reduce(e,[],function(f,h,g){if(0==g||(d?b.last(f)!=h:!b.include(f,h))){f.push(h)}return f})};b.intersect=function(e){var d=b.toArray(arguments).slice(1);return b.select(b.uniq(e),function(f){return b.all(d,function(g){return b.indexOf(g,f)>=0})})};b.zip=function(){var d=b.toArray(arguments);var g=b.max(b.pluck(d,"length"));var f=new Array(g);for(var e=0;e<g;e++){f[e]=b.pluck(d,String(e))}return f};b.indexOf=function(e,d){if(e.indexOf){return e.indexOf(d)}for(i=0;i<e.length;i++){if(e[i]===d){return i}}return -1};b.lastIndexOf=function(e,d){if(e.lastIndexOf){return e.lastIndexOf(d)}for(i=e.length-1;i>=0;i--){if(e[i]===d){return i}}return -1};b.bind=function(f,e){if(!e){return f}var d=b.toArray(arguments).slice(2);return function(){var g=d.concat(b.toArray(arguments));return f.apply(e,g)}};b.bindAll=function(){var d=b.toArray(arguments);var e=d.pop();b.each(d,function(f){e[f]=b.bind(e[f],e)})};b.delay=function(e,f){var d=b.toArray(arguments).slice(2);return setTimeout(function(){return e.apply(e,d)},f)};b.defer=function(d){return b.delay.apply(b,[d,1].concat(b.toArray(arguments).slice(1)))};b.wrap=function(d,e){return function(){var f=[d].concat(b.toArray(arguments));return e.apply(e,f)}};b.compose=function(){var d=b.toArray(arguments);return function(){for(var e=d.length-1;e>=0;e--){arguments=[d[e].apply(this,arguments)]}return arguments[0]}};b.keys=function(d){return b.pluck(d,"key")};b.values=function(d){return b.pluck(d,"value")};b.extend=function(d,f){for(var e in f){d[e]=f[e]}return d};b.clone=function(d){return b.extend({},d)};b.isEqual=function(e,d){if(e===d){return true}var h=typeof(e),k=typeof(d);if(h!=k){return false}if(e==d){return true}if(e.isEqual){return e.isEqual(d)}if(h!=="object"){return false}var f=b.keys(e),j=b.keys(d);if(f.length!=j.length){return false}for(var g in e){if(!b.isEqual(e[g],d[g])){return false}}return true};b.isElement=function(d){return !!(d&&d.nodeType==1)};b.isArray=function(d){return Object.prototype.toString.call(d)=="[object Array]"};b.isFunction=function(d){return typeof d=="function"};b.isUndefined=function(d){return typeof d=="undefined"};b.noConflict=function(){a._=c;return this};b.uniqueId=function(d){var e=this._idCounter=(this._idCounter||0)+1;return d?d+e:e};b.template=function(f,e){var d=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?d(e):d};b.forEach=b.each;b.inject=b.reduce;b.filter=b.select;b.every=b.all;b.some=b.any;if(!b.isUndefined(exports)){exports=b}})();