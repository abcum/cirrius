(function(){var b=this;var d=b._;var e=function(f){this._wrapped=f};var c=b._=function(f){return new e(f)};if(typeof exports!=="undefined"){c=exports}c.VERSION="0.4.0";c.each=function(o,m,k){var g=0;try{if(o.forEach){o.forEach(m,k)}else{if(o.length){for(var j=0,f=o.length;j<f;j++){m.call(k,o[j],j,o)}}else{if(o.each){o.each(function(p){m.call(k,p,g++,o)})}else{for(var h in o){if(Object.prototype.hasOwnProperty.call(o,h)){m.call(k,o[h],h,o)}}}}}}catch(n){if(n!="__break__"){throw n}}return o};c.map=function(j,h,g){if(j&&j.map){return j.map(h,g)}var f=[];c.each(j,function(n,k,m){f.push(h.call(g,n,k,m))});return f};c.reduce=function(j,f,h,g){if(j&&j.reduce){return j.reduce(c.bind(h,g),f)}c.each(j,function(n,k,m){f=h.call(g,f,n,k,m)});return f};c.reduceRight=function(j,f,h,g){if(j&&j.reduceRight){return j.reduceRight(c.bind(h,g),f)}var k=c.clone(c.toArray(j)).reverse();c.each(k,function(n,m){f=h.call(g,f,n,m,j)});return f};c.detect=function(j,h,g){var f;c.each(j,function(n,k,m){if(h.call(g,n,k,m)){f=n;throw"__break__"}});return f};c.select=function(j,h,g){if(j.filter){return j.filter(h,g)}var f=[];c.each(j,function(n,k,m){h.call(g,n,k,m)&&f.push(n)});return f};c.reject=function(j,h,g){var f=[];c.each(j,function(n,k,m){!h.call(g,n,k,m)&&f.push(n)});return f};c.all=function(j,h,g){h=h||c.identity;if(j.every){return j.every(h,g)}var f=true;c.each(j,function(n,k,m){if(!(f=f&&h.call(g,n,k,m))){throw"__break__"}});return f};c.any=function(j,h,g){h=h||c.identity;if(j.some){return j.some(h,g)}var f=false;c.each(j,function(n,k,m){if(f=h.call(g,n,k,m)){throw"__break__"}});return f};c.include=function(h,g){if(c.isArray(h)){return c.indexOf(h,g)!=-1}var f=false;c.each(h,function(j){if(f=j===g){throw"__break__"}});return f};c.invoke=function(g,h){var f=c.toArray(arguments).slice(2);return c.map(g,function(j){return(h?j[h]:j).apply(j,f)})};c.pluck=function(g,f){return c.map(g,function(h){return h[f]})};c.max=function(j,h,g){if(!h&&c.isArray(j)){return Math.max.apply(Math,j)}var f={computed:-Infinity};c.each(j,function(o,k,n){var m=h?h.call(g,o,k,n):o;m>=f.computed&&(f={value:o,computed:m})});return f.value};c.min=function(j,h,g){if(!h&&c.isArray(j)){return Math.min.apply(Math,j)}var f={computed:Infinity};c.each(j,function(o,k,n){var m=h?h.call(g,o,k,n):o;m<f.computed&&(f={value:o,computed:m})});return f.value};c.sortBy=function(h,g,f){return c.pluck(c.map(h,function(m,j,k){return{value:m,criteria:g.call(f,m,j,k)}}).sort(function(n,m){var k=n.criteria,j=m.criteria;return k<j?-1:k>j?1:0}),"value")};c.sortedIndex=function(m,k,h){h=h||c.identity;var f=0,j=m.length;while(f<j){var g=(f+j)>>1;h(m[g])<h(k)?f=g+1:j=g}return f};c.toArray=function(f){if(!f){return[]}if(c.isArray(f)){return f}return c.map(f,function(g){return g})};c.size=function(f){return c.toArray(f).length};c.first=function(f){return f[0]};c.last=function(f){return f[f.length-1]};c.compact=function(f){return c.select(f,function(g){return !!g})};c.flatten=function(f){return c.reduce(f,[],function(g,h){if(c.isArray(h)){return g.concat(c.flatten(h))}g.push(h);return g})};c.without=function(g){var f=g.slice.call(arguments,0);return c.select(g,function(h){return !c.include(f,h)})};c.uniq=function(g,f){return c.reduce(g,[],function(h,k,j){if(0==j||(f?c.last(h)!=k:!c.include(h,k))){h.push(k)}return h})};c.intersect=function(g){var f=c.toArray(arguments).slice(1);return c.select(c.uniq(g),function(h){return c.all(f,function(j){return c.indexOf(j,h)>=0})})};c.zip=function(){var f=c.toArray(arguments);var j=c.max(c.pluck(f,"length"));var h=new Array(j);for(var g=0;g<j;g++){h[g]=c.pluck(f,String(g))}return h};c.indexOf=function(g,f){if(g.indexOf){return g.indexOf(f)}for(i=0,l=g.length;i<l;i++){if(g[i]===f){return i}}return -1};c.lastIndexOf=function(h,g){if(h.lastIndexOf){return h.lastIndexOf(g)}var f=h.length;while(f--){if(h[f]===g){return f}}return -1};c.bind=function(h,g){if(!g){return h}var f=c.toArray(arguments).slice(2);return function(){var j=f.concat(c.toArray(arguments));return h.apply(g,j)}};c.bindAll=function(){var f=c.toArray(arguments);var g=f.pop();c.each(f,function(h){g[h]=c.bind(g[h],g)})};c.delay=function(g,h){var f=c.toArray(arguments).slice(2);return setTimeout(function(){return g.apply(g,f)},h)};c.defer=function(f){return c.delay.apply(c,[f,1].concat(c.toArray(arguments).slice(1)))};c.wrap=function(f,g){return function(){var h=[f].concat(c.toArray(arguments));return g.apply(g,h)}};c.compose=function(){var f=c.toArray(arguments);return function(){for(var g=f.length-1;g>=0;g--){arguments=[f[g].apply(this,arguments)]}return arguments[0]}};c.keys=function(f){return c.map(f,function(h,g){return g})};c.values=function(f){return c.map(f,c.identity)};c.extend=function(f,h){for(var g in h){f[g]=h[g]}return f};c.clone=function(f){if(c.isArray(f)){return f.slice(0)}return c.extend({},f)};c.isEqual=function(g,f){if(g===f){return true}var k=typeof(g),n=typeof(f);if(k!=n){return false}if(g==f){return true}if(g.isEqual){return g.isEqual(f)}if(k!=="object"){return false}var h=c.keys(g),m=c.keys(f);if(h.length!=m.length){return false}for(var j in g){if(!c.isEqual(g[j],f[j])){return false}}return true};c.isElement=function(f){return !!(f&&f.nodeType==1)};c.isArray=function(f){return Object.prototype.toString.call(f)=="[object Array]"};c.isFunction=function(f){return Object.prototype.toString.call(f)=="[object Function]"};c.isUndefined=function(f){return typeof f=="undefined"};c.noConflict=function(){b._=d;return this};c.identity=function(f){return f};var a=0;c.uniqueId=function(f){var g=a++;return f?f+g:g};c.functions=function(){var g=[];for(var f in c){if(Object.prototype.hasOwnProperty.call(c,f)){g.push(f)}}return c.without(g,"VERSION","prototype","noConflict").sort()};c.template=function(h,g){var f=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+h.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return g?f(g):f};c.forEach=c.each;c.foldl=c.inject=c.reduce;c.foldr=c.reduceRight;c.filter=c.select;c.every=c.all;c.some=c.any;c.methods=c.functions;c.each(c.functions(),function(f){e.prototype[f]=function(){Array.prototype.unshift.call(arguments,this._wrapped);var g=c[f].apply(c,arguments);return this._chain?c(g).chain():g}});e.prototype.chain=function(){this._chain=true;return this};e.prototype.get=function(){return this._wrapped}})();